<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Group Members</h2>

  <!-- Invite New Member -->
  <div class="mb-6 p-4 border rounded-lg">
    <h3 class="text-xl font-semibold mb-2">Invite New Member</h3>
    <div class="flex items-center space-x-2">
      <input 
        type="email" 
        [(ngModel)]="newMemberEmail" 
        class="input input-bordered w-full" 
        placeholder="Enter email address"
      />
      <button 
        class="btn btn-primary" 
        (click)="sendInvite()" 
        [disabled]="isSending || !newMemberEmail.trim()">
        <span *ngIf="isSending" class="loading loading-spinner"></span>
        {{ isSending ? 'Sending...' : 'Send Invite' }}
      </button>
    </div>
    <!-- The success message box below is now removed -->
  </div>

  <!-- Pending Invitations -->
  <div *ngIf="(pendingInvites$ | async) as invites" class="mb-6">
    <h3 class="text-xl font-semibold mb-2">Pending Invitations</h3>
    <div *ngIf="invites.length > 0; else noPendingInvites" class="space-y-2">
      <div *ngFor="let invite of invites" class="flex items-center justify-between p-2 border rounded">
        <span>{{ invite.recipientEmail }}</span>
        <button class="btn btn-sm btn-error" (click)="revokeInvite(invite.key)">Revoke Access</button>
      </div>
    </div>
    <ng-template #noPendingInvites>
      <p>No pending invitations.</p>
    </ng-template>
  </div>

  <!-- Current Members -->
  <div>
    <h3 class="text-xl font-semibold mb-2">Current Members</h3>
    <div *ngIf="(members$ | async) as members" class="space-y-2">
      <div *ngFor="let member of members" class="flex items-center justify-between p-2 border rounded">
        <span>{{ member.uid }}</span> <!-- You might want to display member name/email instead -->
        <button class="btn btn-sm btn-error" (click)="deleteMember(member.uid)">Delete</button>
      </div>
    </div>
  </div>

</div>
